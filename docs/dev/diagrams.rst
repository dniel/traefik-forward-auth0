Diagrams
========

Component diagram
-----------------

.. figure:: /_static/component.png
   :alt: Component diagram

   UML component diagram

Sequence diagram
----------------

.. figure:: /_static/sequence.png
   :alt: Sequence diagram

   UML sequence diagram

Authorization activity diagram
------------------------------

.. uml::

    digraph G {
        VALIDATING_PERMISSIONS -> ACCESS_GRANTED;
        VALIDATING_PERMISSIONS -> ACCESS_DENIED;
        VALIDATING_WHITELISTED_URL -> VALIDATING_RESTRICTED_METHOD;
        VALIDATING_WHITELISTED_URL -> ACCESS_GRANTED;
        VALIDATING_RESTRICTED_METHOD -> ACCESS_GRANTED;
        VALIDATING_RESTRICTED_METHOD -> VALIDATING_TOKENS;
        VALIDATING_TOKENS -> VALIDATING_ACCESS_TOKEN;
        VALIDATING_ACCESS_TOKEN -> INVALID_TOKEN;
        VALIDATING_ACCESS_TOKEN -> VALIDATING_PERMISSIONS;
        AWAIT_AUTHORIZING -> AUTHORIZING;
        AUTHORIZING -> ERROR;
        AUTHORIZING -> VALIDATING_REQUESTED_URL;
        INVALID_TOKEN -> NEED_REDIRECT;
        INVALID_TOKEN -> ACCESS_DENIED;
        VALIDATING_REQUESTED_URL -> VALIDATING_WHITELISTED_URL;
    }

Authentication activity diagram
-------------------------------

.. uml::

    digraph G {
    AUTHENTICATING -> VALIDATING_TOKENS;
     VALIDATING_ID_TOKEN -> INVALID_TOKEN;
     VALIDATING_ID_TOKEN -> VALIDATING_SAME_SUBS;
     VALID_TOKENS -> AUTHENTICATED;
     INVALID_TOKEN -> ANONYMOUS;
     VALIDATING_ACCESS_TOKEN -> VALIDATING_ID_TOKEN;
     VALIDATING_ACCESS_TOKEN -> INVALID_TOKEN;
     VALIDATING_SAME_SUBS -> INVALID_TOKEN;
     VALIDATING_SAME_SUBS -> VALID_TOKENS;
     AWAIT_AUTHENTICATION -> AUTHENTICATING;
     VALIDATING_TOKENS -> VALIDATING_ACCESS_TOKEN;
    }
